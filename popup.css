:root{
  --bg:#fff; --fg:#0f172a; --border:#e5e7eb; --card:#fff; --accent:#2563eb;
  --btn-bg:#f8fafc; --btn-border:#d1d5db;
  --btn-shadow:0 6px 0 #cbd5e1, 0 10px 24px rgba(0,0,0,.08);
  --btn-shadow-active:0 2px 0 #cbd5e1, 0 6px 16px rgba(0,0,0,.12);
}
body.no-anim, body.no-anim * {
  transition: none !important;
}

/* Add class to body during initialization */
body.initializing {
  opacity: 0;
}
html,body{margin:0;padding:0}
body{
  width:320px; font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:var(--bg); color:var(--fg);
  transition:background-color 200ms ease,color 200ms ease,border-color 200ms ease,box-shadow 200ms ease;
}
body[data-theme="dark"]{
  --bg:#0e1117; --fg:#e5e7eb; --border:#1f2937; --card:#161b22; --accent:#10b981;
  --btn-bg:#0f172a; --btn-border:#1f2937;
  --btn-shadow:0 8px 0 #0b1220, 0 18px 28px rgba(0,0,0,.55);
  --btn-shadow-active:0 3px 0 #0b1220, 0 10px 20px rgba(0,0,0,.5);
}
#topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--border);background:var(--card)}
h3{margin:0;font-size:15px}
#wrap{padding:12px 14px 16px;background:var(--bg)}
#themeToggle{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:8px;border:1px solid var(--border);background:var(--btn-bg);color:var(--fg);cursor:pointer;transition:background-color 200ms ease,color 200ms ease,border-color 200ms ease}
#themeToggle .sun{display:none}
#themeToggle .moon{display:inline}
body:not([data-theme="dark"]) #themeToggle .sun{display:inline}
body:not([data-theme="dark"]) #themeToggle .moon{display:none}
#themeToggle:hover{background:var(--accent);color:#fff}

.btn-3d{
  --mx:50%; --my:50%; --glow: rgba(0,0,0,0);
  width:100%; box-sizing:border-box; padding:12px 14px; border-radius:12px;
  border:1px solid var(--btn-border); background:var(--btn-bg); color:var(--fg); font-weight:600; cursor:pointer;
  background-image:
    linear-gradient(to bottom, rgba(255,255,255,.06), rgba(0,0,0,.06)),
    radial-gradient(140px 140px at var(--mx) var(--my), var(--glow), transparent 60%);
  box-shadow:var(--btn-shadow); transform:translateY(0);
  transition:box-shadow 180ms ease, transform 80ms ease, background-color 200ms ease, background-image 200ms ease, color 200ms ease, border-color 200ms ease
}
body:not([data-theme="dark"]) .btn-3d:hover{ --glow: rgba(0,128,255,.35) }
body[data-theme="dark"] .btn-3d:hover{ --glow: rgba(0,255,200,.45) }
.btn-3d:hover{ box-shadow:0 10px 0 rgba(0,0,0,.06), 0 18px 28px rgba(0,0,0,.18), 0 0 0 1px var(--btn-border), 0 0 24px rgba(0,128,255,.24) }
.btn-3d:active{ transform:translateY(4px); box-shadow:var(--btn-shadow-active), 0 0 18px rgba(0,128,255,.2) }
.btn-3d:hover, .btn-3d:active{ color:var(--fg) }

.hint{color:#64748b;margin:10px 2px 0 2px;font-size:12px}
*{transition:background-color 200ms ease, color 200ms ease, border-color 200ms ease}
/* ============ SETTINGS BUTTON ============ */
#settingsBtn {
  background: transparent;
  border: none;
  color: inherit;               /* inherit text/icon color from header */
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: background 0.2s ease;
}

#settingsBtn:hover,
#settingsBtn:focus {
  background: rgba(128, 128, 128, 0.15);  /* subtle hover tone */
  outline: none;
}

#settingsBtn svg {
  width: 18px;
  height: 18px;
}

@media (prefers-color-scheme: dark){
  body:not([data-theme]){background:#0e1117; color:#e5e7eb}
}
/* ========= Full-screen Settings View ========= */
#view-settings {
  display: flex;
  flex-direction: column;
  min-height: 100%;
  background: var(--bg);
  color: var(--fg);
}

/* Top toolbar inside settings */
.toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  background: var(--card);
}
.icon-btn {
  border: 1px solid var(--border);
  background: var(--btn-bg);
  color: var(--fg);
  width: 30px; height: 30px;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 8px; cursor: pointer;
  transition: background-color 200ms ease, color 200ms ease, border-color 200ms ease;
}
.icon-btn:hover { background: var(--accent); color: #fff; }
.toolbar-title { margin: 0; font-size: 14px; font-weight: 600; }
.toolbar-spacer { margin-left: auto; }

.settings-body {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}


/* Toggle */
.toggle { display: inline-flex; align-items: center; gap: 10px; cursor: pointer; user-select: none; }
.toggle input { display: none; }
.slider {
  width: 42px; height: 24px; border-radius: 999px; position: relative;
  background: #bbb; transition: background .2s ease;
}
.slider::after {
  content: ""; position: absolute; top: 3px; left: 3px;
  width: 18px; height: 18px; border-radius: 50%; background: #fff;
  box-shadow: 0 1px 2px rgba(0,0,0,.25); transition: transform .2s ease;
}
.toggle input:checked + .slider { background: #4caf50; }
.toggle input:checked + .slider::after { transform: translateX(18px); }
.toggle-label { font-size: 0.95rem; }

/* Field + select */
.field { display: flex; flex-direction: column; gap: 6px; }
.field-label { font-size: 0.9rem; opacity: 0.85; }
.select {
  padding: 8px; border-radius: 10px; border: 1px solid var(--border);
  background: var(--card); color: var(--fg);
}
.help { font-size: 0.8rem; opacity: 0.7; }

/* Footer */
.settings-footer {
  margin-top: auto;
  padding: 12px 14px 14px;
  border-top: 1px solid var(--border);
  background: var(--bg);
}
/* View-state control: only one screen at a time */
body.view-settings #topbar,
body.view-settings #wrap {
  display: none !important;
}
body.view-settings #view-settings {
  display: flex !important;
}

/* Default: settings view hidden unless body has .view-settings */
body:not(.view-settings) #view-settings {
  display: none !important;
}
/* Compact settings typography */
#view-settings { font-size: 13px; }             /* smaller text only in settings */
#view-settings .toolbar-title { font-size: 13px; }

/* List layout */
.settings-list {
  display: flex;
  flex-direction: column;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.setting-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: var(--card);
  border-bottom: 1px solid var(--border);
}
.setting-row:last-child { border-bottom: 0; }

.row-label {
  font-weight: 600;
  opacity: 0.95;
}

/* Right-side control should hug the right */
.setting-row > .toggle,
.setting-row > .select {
  margin-left: auto;
}

/* Smaller toggle */
.toggle-sm .slider {
  width: 36px;
  height: 20px;
}
.toggle-sm .slider::after {
  width: 14px;
  height: 14px;
  top: 3px;
  left: 3px;
}
.toggle-sm input:checked + .slider::after {
  transform: translateX(16px);
}

/* Smaller select */
.select-sm {
  padding: 6px 10px;
  height: 30px;
  border-radius: 8px;
  max-width: 58%;
}

/* Tighter body + footer spacing */
.settings-body { padding: 12px; }
.settings-footer .btn-3d { padding: 10px 12px; }
